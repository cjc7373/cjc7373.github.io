<!doctype html><html lang=zh><head><title>Codeforces Round 634 (Div. 3) 题解</title><meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content="3MbbliKSwhNvv713tGB2RL8xvrJC404x1BFONabsw7g"><meta content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=5" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><script src=/js/toc.js></script><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/dark-mode.min.fa793cdb4ae2d683f9cccdaf1c7922313b4cf124910b552cbc6b3a7ae3b45926.css integrity="sha256-+nk820ri1oP5zM2vHHkiMTtM8SSRC1UsvGs6euO0WSY=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"><script async defer data-domain=blog.coherence.codes src=https://analytics.coherence.space/js/plausible.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item active" href=/posts>存档
</a><a class="a-block drawer-menu-item false" href=/tags>标签
</a><a class="a-block drawer-menu-item false" href=/categories>分类
</a><a class="a-block drawer-menu-item false" href=/friends>友链
</a><a class="a-block drawer-menu-item false" href=/about>关于
</a><a class="a-block drawer-menu-item false" href=/index.xml>RSS Feed</a><div class=toc><div class=toc-content><center>- 目录 -</center><ul><ul><li><a href=#1335a---candies-and-two-sisters class=nav-1335a---candies-and-two-sisters>1335A - Candies and Two Sisters</a></li><li><a href=#1335b---construct-the-string class=nav-1335b---construct-the-string>1335B - Construct the String</a></li><li><a href=#1335c---two-teams-composing class=nav-1335c---two-teams-composing>1335C - Two Teams Composing</a></li><li><a href=#1335d---anti-sudoku class=nav-1335d---anti-sudoku>1335D - Anti-Sudoku</a></li><li><a href=#1335e---three-blocks-palindrome class=nav-1335e---three-blocks-palindrome>1335E - Three Blocks Palindrome</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://blog.coherence.codes/>Coherence's Blog
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://blog.coherence.codes/><div class=single-column-header-title>Coherence's Blog</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only><div class=post-title>Codeforces Round 634 (Div. 3) 题解<div class=post-meta><time itemprop=datePublished>2020-04-19 19:00
</time><i class=material-icons>label</i>
<a href=/tags/%E7%AE%97%E6%B3%95>算法</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=1335a---candies-and-two-sisters><a href=https://codeforces.com/contest/1335/problem/A>1335A - Candies and Two Sisters</a></h2><p><code>1/0 Accepted</code></p><p>快乐签到。</p><h2 id=1335b---construct-the-string><a href=https://codeforces.com/contest/1335/problem/B>1335B - Construct the String</a></h2><p><code>1/0 Accepted</code></p><p>先构造长度为 $a$ 的字符串，然后第 $i+a$ 个字母为第 $i$ 个字母，输出即可。</p><h2 id=1335c---two-teams-composing><a href=https://codeforces.com/contest/1335/problem/C>1335C - Two Teams Composing</a></h2><p><code>2/1 Accepted</code></p><p>给 $n$ 个数，每个数有一个值，要求把它们分成数量相同的两组，一组所有的值相等，一组所有的值不等。</p><p>先统计每个值的数量，得出最大个数 $m$，和不同值的数的个数 $l$，</p><p><code>ans = min(l, m) if m &lt; l + 2 else ans = min(l, m) + 1</code></p><h2 id=1335d---anti-sudoku><a href=https://codeforces.com/contest/1335/problem/D>1335D - Anti-Sudoku</a></h2><p><code>1/0 Accepted</code></p><p>给一个求解好的数独，求改动不超过 9 个数，使其每行、列、区块内皆有两个相同的数。</p><p>想了两分钟，发现将所有的 1 替换为 2 即可。</p><h2 id=1335e---three-blocks-palindrome><a href=https://codeforces.com/contest/1335/problem/E2>1335E - Three Blocks Palindrome</a></h2><p><code>Not Attempted</code></p><p>给一个含有$n$个数的序列，定义三区块的回文数为：$[\underbrace{a, a, \dots, a}<em>{x}, \underbrace{b, b, \dots, b}</em>{y}, \underbrace{a, a, \dots, a}_{x}]$，$x, y$是大于等于0的整数，a可以等于b。求一个最长子序列使它为三区块的回文数。输出长度。</p><p>又是一道需要神奇的优化的题。。</p><p><img src=./image-20200416163610781.png alt=image-20200416163610781></p><p>按官方题解的思路是这样：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>input <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>stdin<span style=color:#f92672>.</span>readline
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#f92672>=</span> int(input())
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(t):
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> int(input())
</span></span><span style=display:flex><span>    s <span style=color:#f92672>=</span> [int(i) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> input()<span style=color:#f92672>.</span>split()]
</span></span><span style=display:flex><span>    prev <span style=color:#f92672>=</span> [[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> n <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>)]
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> [[] <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>)]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> i <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>: <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>            prev[j][i] <span style=color:#f92672>=</span> prev[j][i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>        prev[s[i]][i] <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        pos[s[i]]<span style=color:#f92672>.</span>append(i)
</span></span><span style=display:flex><span>    ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># if x == 0</span>
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>=</span> max(ans, len(pos[i])) 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># if x != 0</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>, (len(pos[i]) <span style=color:#f92672>//</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>            m <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> k <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>):
</span></span><span style=display:flex><span>                m <span style=color:#f92672>=</span> max(m, prev[k][pos[i][<span style=color:#f92672>-</span>j]<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> prev[k][pos[i][j<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]])
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> max(ans, m <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> j)
</span></span><span style=display:flex><span>    print(ans)
</span></span></code></pre></div><p>但是超时了。翻别人的代码发现创建prev数组还能优化：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>input <span style=color:#f92672>=</span> sys<span style=color:#f92672>.</span>stdin<span style=color:#f92672>.</span>readline
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>t <span style=color:#f92672>=</span> int(input())
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> _ <span style=color:#f92672>in</span> range(t):
</span></span><span style=display:flex><span>    n <span style=color:#f92672>=</span> int(input())
</span></span><span style=display:flex><span>    s <span style=color:#f92672>=</span> [int(i) <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> input()<span style=color:#f92672>.</span>split()]
</span></span><span style=display:flex><span>    prev <span style=color:#f92672>=</span> [[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>*</span> <span style=color:#ae81ff>201</span>] <span style=color:#f92672>*</span> n
</span></span><span style=display:flex><span>    pos <span style=color:#f92672>=</span> [[] <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>)]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(n):
</span></span><span style=display:flex><span>        prev[i] <span style=color:#f92672>=</span> prev[i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]<span style=color:#f92672>.</span>copy()
</span></span><span style=display:flex><span>        prev[i][s[i]] <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        pos[s[i]]<span style=color:#f92672>.</span>append(i)
</span></span><span style=display:flex><span>    ans <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># if x == 0</span>
</span></span><span style=display:flex><span>        ans <span style=color:#f92672>=</span> max(ans, len(pos[i])) 
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># if x != 0</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>, (len(pos[i]) <span style=color:#f92672>//</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>):
</span></span><span style=display:flex><span>            m <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> k <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>201</span>):
</span></span><span style=display:flex><span>                m <span style=color:#f92672>=</span> max(m, prev[pos[i][<span style=color:#f92672>-</span>j]<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>][k] <span style=color:#f92672>-</span> prev[pos[i][j<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]][k])
</span></span><span style=display:flex><span>            ans <span style=color:#f92672>=</span> max(ans, m <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> j)
</span></span><span style=display:flex><span>    print(ans)
</span></span></code></pre></div><p>700多ms过了。。</p><hr width=100% id=EOF><p style=color:#777>最后修改于 2020-04-19</p></div></div><nav class=post-pagination><a class=newer-posts href=/posts/2021/anki_workflow/>下回<br>Anki 工作流
</a><a class=older-posts href=/posts/2020_and_before/codeforces_629_div3/>上回<br>Codeforces Round 629 (Div. 3) 题解</a></nav><div class=post-comment-wrapper></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://blog.coherence.codes/><div class=nav-title>Coherence's Blog</div></a><div class=nav-link-list><a class="a-block nav-link-item active" href=/posts>存档
</a><a class="a-block nav-link-item false" href=/tags>标签
</a><a class="a-block nav-link-item false" href=/categories>分类
</a><a class="a-block nav-link-item false" href=/friends>友链
</a><a class="a-block nav-link-item false" href=/about>关于
</a><a class="a-block nav-link-item false" href=/index.xml>RSS Feed</a></div><div class=nav-footer><a href=https://github.com/cjc7373/hugo-theme-diary>Modified</a> Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>移植自 <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Coherence. 本站遵循 CC BY-NC-SA 4.0 协议</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- 目录 -</center><ul><ul><li><a href=#1335a---candies-and-two-sisters class=nav-1335a---candies-and-two-sisters>1335A - Candies and Two Sisters</a></li><li><a href=#1335b---construct-the-string class=nav-1335b---construct-the-string>1335B - Construct the String</a></li><li><a href=#1335c---two-teams-composing class=nav-1335c---two-teams-composing>1335C - Two Teams Composing</a></li><li><a href=#1335d---anti-sudoku class=nav-1335d---anti-sudoku>1335D - Anti-Sudoku</a></li><li><a href=#1335e---three-blocks-palindrome class=nav-1335e---three-blocks-palindrome>1335E - Three Blocks Palindrome</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer><a href=https://github.com/cjc7373/hugo-theme-diary>Modified</a> Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>移植自 <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
Coherence. 本站遵循 CC BY-NC-SA 4.0 协议</div></div><script src=/js/journal.js></script></body></html>