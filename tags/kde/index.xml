<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>KDE on Coherence's Blog</title><link>https://blog.coherence.codes/tags/kde/</link><description>Recent content in KDE on Coherence's Blog</description><generator>Hugo</generator><language>zh-cn</language><copyright>Coherence. 本站遵循 CC BY-NC-SA 4.0 协议</copyright><lastBuildDate>Mon, 04 Sep 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.coherence.codes/tags/kde/index.xml" rel="self" type="application/rss+xml"/><item><title>神秘的自动关闭显示器失效问题</title><link>https://blog.coherence.codes/posts/2023/%E7%A5%9E%E7%A7%98%E7%9A%84%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E6%98%BE%E7%A4%BA%E5%99%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</link><pubDate>Mon, 04 Sep 2023 00:00:00 +0000</pubDate><guid>https://blog.coherence.codes/posts/2023/%E7%A5%9E%E7%A7%98%E7%9A%84%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E6%98%BE%E7%A4%BA%E5%99%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</guid><description>&lt;h2 id="问题"&gt;问题&lt;/h2&gt;
&lt;p&gt;我的桌面环境为 KDE/X11，我在 KDE 的 Power Management 设置中设置了 &lt;code&gt;Screen Energy Saving: Switch off after 5 min&lt;/code&gt;，这个选项时不时地出问题，表现为刚开机时能够正常工作，在闲置五分钟后关闭显示器，但在一段时间过后就不行了，这个一段时间可长可短。重启电脑又能重新工作，而锁屏后也能够正常工作。这个问题从我用 KDE 开始就一直困扰着我，时至今日。&lt;/p&gt;
&lt;h2 id="排查"&gt;排查&lt;/h2&gt;
&lt;p&gt;KDE 的电源管理由 powerdevil 控制，其作为 &lt;code&gt;plasma-powerdevil.service&lt;/code&gt; 用户服务运行，查询日志发现有一些神秘的 &lt;code&gt;org_kde_powerdevil[1310]: QObject::disconnect: Unexpected nullptr parameter&lt;/code&gt; 报错，之后证实该报错与本问题无关。&lt;/p&gt;
&lt;p&gt;查看该 &lt;code&gt;.service&lt;/code&gt; 文件发现其使用 &lt;code&gt;Type=dbus&lt;/code&gt; 的启动类型，并且获得了一个叫 &lt;code&gt;org.kde.Solid.PowerManagement&lt;/code&gt; 的 bus name。用 QBBusViewer 可以看到 powerdevil 还提供了 &lt;code&gt;org.freedesktop.PowerManagement&lt;/code&gt; 这一服务。&lt;/p&gt;
&lt;p&gt;查阅 powerdevil 源码以 &lt;code&gt;Switch off after&lt;/code&gt; 为关键词进行搜索可发现相关逻辑位于 &lt;code&gt;daemon/actions/bundled/dpms.cpp&lt;/code&gt; 文件下，根据名字猜测 dpms 即 Display Power Management Signaling 的缩写。简单看了一下 dpms，这是一个古老的协议，在 1993 年发布，定义了四种模式，但 &lt;a href="https://wiki.archlinux.org/title/Display_Power_Management_Signaling"&gt;archwiki 上&lt;/a&gt;指出：&lt;/p&gt;



 &lt;blockquote&gt;
 &lt;p&gt;Note that DPMS was developed for CRT monitors, and on LCD displays, there is normally no difference between the standby, suspend and off modes.&lt;/p&gt;</description></item></channel></rss>