<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-126196845-1', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    
    
    
    <title>DOMjudge 配置/踩坑指南 | Coherence</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="ACM">
    <meta name="description" content="我校新生赛也能用上 World Final 同款评测系统啦~ DOMjudge 提供了详尽的官方文档，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾了有两个星期吧，以此文作为避（踩）坑指南。">
<meta name="keywords" content="ACM">
<meta property="og:type" content="article">
<meta property="og:title" content="DOMjudge 配置&#x2F;踩坑指南">
<meta property="og:url" content="https://cjc7373.github.io/2018/12/19/Domjudge-config/index.html">
<meta property="og:site_name" content="Coherence">
<meta property="og:description" content="我校新生赛也能用上 World Final 同款评测系统啦~ DOMjudge 提供了详尽的官方文档，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾了有两个星期吧，以此文作为避（踩）坑指南。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://cjc7373.github.io/2018/12/19/Domjudge-config/Domjudge-config/1545218741334.png">
<meta property="og:image" content="https://cjc7373.github.io/2018/12/19/Domjudge-config/Domjudge-config/1545219324330.png">
<meta property="og:image" content="https://cjc7373.github.io/2018/12/19/Domjudge-config/Domjudge-config/1545220336183.png">
<meta property="og:updated_time" content="2019-03-19T00:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DOMjudge 配置&#x2F;踩坑指南">
<meta name="twitter:description" content="我校新生赛也能用上 World Final 同款评测系统啦~ DOMjudge 提供了详尽的官方文档，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾了有两个星期吧，以此文作为避（踩）坑指南。">
<meta name="twitter:image" content="https://cjc7373.github.io/2018/12/19/Domjudge-config/Domjudge-config/1545218741334.png">
    
        <link rel="alternate" type="application/atom+xml" title="Coherence" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu"  >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Coherence</h5>
          <a href="mailto:niuchangcun@gmail.com" title="niuchangcun@gmail.com" class="mail">niuchangcun@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/cjc7373" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">DOMjudge 配置/踩坑指南</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">DOMjudge 配置/踩坑指南</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-12-19T20:12:51.000Z" itemprop="datePublished" class="page-time">
  2018-12-19
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装"><span class="post-toc-number">2.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置"><span class="post-toc-number">3.</span> <span class="post-toc-text">配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#题目导入"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">题目导入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#队伍导入"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">队伍导入</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#API"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">API</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#滚榜"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">滚榜</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#新生赛概况"><span class="post-toc-number">4.</span> <span class="post-toc-text">新生赛概况</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Domjudge-config"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">DOMjudge 配置/踩坑指南</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-12-19 20:12:51" datetime="2018-12-19T20:12:51.000Z"  itemprop="datePublished">2018-12-19</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p>我校新生赛也能用上 World Final 同款评测系统啦~</p>
<p>DOMjudge 提供了详尽的<a href="https://www.domjudge.org/documentation" target="_blank" rel="noopener">官方文档</a>，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾了有两个星期吧，以此文作为避（踩）坑指南。</p>
<a id="more"></a>

<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>DOMjudge，作为一款开源的 CCS(<a href="https://clics.ecs.baylor.edu/index.php?title=Contest_Control_System" target="_blank" rel="noopener">Contest Control System</a>)，现已被ICPC钦定为官方的比赛评测系统。比 pc^2 这种闭源而含有诸多 Bug 的 CCS 高到不知道哪里去了啊。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="Domjudge-config/1545218741334.png" alt="1545218741334" title>
                </div>
                <div class="image-caption">1545218741334</div>
            </figure>

<p>根据官方文档的描述，DOMjudge 的主要特性有：</p>
<ul>
<li>分布式且自动评测的 judge host</li>
<li>Web 用户界面</li>
<li>模块化的系统，方面添加不同的语言/编译器</li>
</ul>
<p>整个 DOMjudge 主要分为两个部分，Domserver 和 Judgehost，据其名字即可得出它们的功能。需要注意的是，DOMjudge 使用数据库来存放几乎一切数据，所以我们还需配置 MySQL 或者 MariaDB。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>DOMjudge 只能运行在 Linux 环境下。博主的运行环境是 Ubuntu Server 18.04 LTS，以及 DOMjudge 6.0.3。</p>
<p>除了传统的安装方式外，DOMjudge 还提供了 Docker 镜像以供安装，这样就大大简化了安装的困难程度。</p>
<p>关于 Docker 的使用这里不作详细描述。（其实是博主也一知半解）</p>
<p>然而<a href="https://hub.docker.com/r/domjudge/domserver" target="_blank" rel="noopener">官方的 Docker 文档中</a>仅使用了命令来启动容器，为了进一步简化安装，也为了方便修改配置，我决定采用 Docker Compose 。以下是 <code>docker-compose.yml</code>文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  mariadb:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">mariadb</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">dj-mariadb</span></span><br><span class="line"><span class="attr">    environment:</span> </span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_ROOT_PASSWORD=rootpw</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_USER=domjudge</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_PASSWORD=djpw</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_DATABASE=domjudge</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">$PWD/data:/var/lib/mysql</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">13306</span><span class="string">:3306</span></span><br><span class="line"><span class="attr">    command:</span> </span><br><span class="line"><span class="bullet">      -</span> <span class="bullet">--max-connections=1000</span></span><br><span class="line"><span class="bullet">      -</span> <span class="bullet">--innodb-log-file-size=480M</span></span><br><span class="line"><span class="attr">  domserver:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">domjudge/domserver:latest</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">domserver</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_HOST=mariadb</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_USER=domjudge</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_DATABASE=domjudge</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_PASSWORD=djpw</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">MYSQL_ROOT_PASSWORD=rootpw</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">CONTAINER_TIMEZONE=Asia/Shanghai</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">phpmyadmin</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">mariadb</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">80</span><span class="string">:80</span></span><br><span class="line"><span class="attr">    links:</span> </span><br><span class="line"><span class="bullet">      -</span> <span class="string">mariadb</span></span><br><span class="line"><span class="attr">  judgehost:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">domjudge/judgehost:latest</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">judgedaemon-0</span></span><br><span class="line"><span class="attr">    privileged:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">CONTAINER_TIMEZONE=Asia/Shanghai</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">DAEMON_ID=0</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">JUDGEDAEMON_PASSWORD=whatthehell</span></span><br><span class="line"><span class="attr">    depends_on:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">domserver</span></span><br><span class="line"><span class="attr">    links:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">domserver</span></span><br><span class="line"><span class="attr">    restart:</span> <span class="string">always</span></span><br><span class="line"><span class="attr">    volumes:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">/sys/fs/cgroup:/sys/fs/cgroup:ro</span></span><br><span class="line"><span class="attr">  phpmyadmin:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">phpmyadmin/phpmyadmin</span></span><br><span class="line"><span class="attr">    container_name:</span> <span class="string">myadmin</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="number">8080</span><span class="string">:80</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">PMA_HOST=mariadb</span></span><br><span class="line"><span class="attr">    links:</span></span><br><span class="line"><span class="attr">      - mariadb:</span><span class="string">mariadb</span></span><br></pre></td></tr></table></figure>

<p>然后运行 <code>docker-compose up -d</code> 即可完成部署。</p>
<p>Judgehost 利用了 Linux 内核的 Cgroup 特性，所以需进行一步额外设置。编辑 <code>/etc/default/grub</code> 文件，将默认的命令改为：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">"quiet cgroup_enable=memory swapaccount=1"</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">"quiet cgroup_enable=memory swapaccount=1"</span></span><br></pre></td></tr></table></figure>

<p>然后运行 <code>update-grub</code> 并重启。</p>
<p>需要多核判题的话创建多个 Judgehost 容器并修改 DAEMON_ID 为不同的值即可。</p>
<p>目前存在的问题：</p>
<ul>
<li>judgehost 用户的初始密码不定，需要手动去 web 端更改并添加 <code>JUDGEDAEMON_PASSWORD</code> 的环境变量。（默认环境变量的密码是 <code>password</code>）</li>
<li>整个系统对我来说是个黑盒…</li>
</ul>
<p>除了 MariaDB , DOMserver , Judgehost 这三个必要的容器外，我还使用了 phpMyAdmin 来进行图形化的数据库管理（备份)。数据库（即 <code>mariadb</code> 容器的数据卷）创建在了当前目录的<code>data</code>文件夹下，方便备份。</p>
<p>其中，Domserver 映射到了主机的 80 端口， phpMyAdmin 映射到了 8080 端口。由于是内网环境，故不准备采用 HTTPS 加密。</p>
<p>需要注意的是，DOMjudge 提供的 Judgehost 镜像中仅包含 C, C++, Java 三种语言的运行环境。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>Domserver 部署成功后，即可通过 Web 端来访问了。默认的管理员账号用户名 <code>admin</code> 密码 <code>admin</code> 。</p>
<p>可以在 Config Checker 中进行配置检查。</p>
<p>C++ 的默认编译选项没有 C++11， 需手动添加。</p>
<h3 id="题目导入"><a href="#题目导入" class="headerlink" title="题目导入"></a>题目导入</h3><p>DOMjudge 支持用 zip 格式的压缩包导入/导出题目。</p>
<p>具体的文件结构是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">│  domjudge-problem.ini</span><br><span class="line">│</span><br><span class="line">├─data</span><br><span class="line">│  ├─sample</span><br><span class="line">│  └─secret</span><br><span class="line">│</span><br><span class="line">└─problem_statement</span><br><span class="line">        problem.&#123;pdf,html,txt&#125;</span><br></pre></td></tr></table></figure>

<p>在 <code>domjudge-problem.ini</code> 中定义了如下信息：</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="Domjudge-config/1545219324330.png" alt="1545219324330" title>
                </div>
                <div class="image-caption">1545219324330</div>
            </figure>

<p>（懒得翻译了，有时间再补）</p>
<p>在 secret 文件夹中存放测试数据，在 sample 文件夹中存放样例数据， 在 problem_statement 存放题面。</p>
<p>（不知道为什么博主在压缩包内上传题面没有成功过，只能通过 Web 端来上传）</p>
<p>测试数据的扩展名为 <code>.in</code> 和 <code>.ans</code>。</p>
<h3 id="队伍导入"><a href="#队伍导入" class="headerlink" title="队伍导入"></a>队伍导入</h3><p>队伍及用户导入采用 tsv(<em>tab-separated values</em>) 格式，即信息之间采用制表符（TAB）分隔。格式由<a href="https://clics.ecs.baylor.edu/index.php?title=Contest_Control_System_Requirements#Appendix:_File_formats" target="_blank" rel="noopener"> ICPC 官方定义</a>。</p>
<p>teams 格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">teams    1</span><br><span class="line">team_id    external_ID    group_id    team_name    institution_name	institution_short_name    country_code</span><br></pre></td></tr></table></figure>

<p>参考<a href="https://cubercsl.cn/notes/DOMjudge-Note.html" target="_blank" rel="noopener">CSL的博客</a>发现：</p>
<blockquote>
<p> 在导入teams表的时候，在<code>Country Code</code>后追加一列，填写<code>Institution External ID</code>。<br>这步是阅读<a href="https://github.com/DOMjudge/domjudge/blob/master/lib/lib.impexp.php#L108" target="_blank" rel="noopener">源代码</a>后猜测的，当时的实际操作是直接在数据库中的<code>team_affiliation</code>用SQL语句更新<code>ExternalID</code>的。</p>
</blockquote>
<p>博主采用了这种方式，并在导入队伍后通过 Web 界面手动添加 Affiliation 信息。</p>
<p>accounts 格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">accounts	1</span><br><span class="line">account_type	fullname	username	password</span><br></pre></td></tr></table></figure>

<p>一种（可能）简单的方式是先导入队伍再导入用户，并且用户 username 的后缀数字与 team_id 相同。不需要的字段可以直接留空。（不能缺少分隔符）</p>
<p>tsv 文件可以采用 Excel 生成。在 Excel 中输入完数据后选择另存为文本文件（制表符分隔）即可。</p>
<p>如需使用<code>institution_name institution_short_name country_code</code> 三项需在 Team Affiliations 中提前创建相应的条目。</p>
<h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>参考官方的 API 说明，DOMjudge 包含<a href="https://clics.ecs.baylor.edu/index.php/Contest_API" target="_blank" rel="noopener"> ICPC 定义的 API </a>和<a href="https://www.domjudge.org/demoweb/api/doc" target="_blank" rel="noopener">自有的 API</a>。</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="Domjudge-config/1545220336183.png" alt="1545220336183" title>
                </div>
                <div class="image-caption">1545220336183</div>
            </figure>

<h3 id="滚榜"><a href="#滚榜" class="headerlink" title="滚榜"></a>滚榜</h3><p>尝试使用官方的 <a href="https://icpc.baylor.edu/icpctools/" target="_blank" rel="noopener">ICPC tools</a>，发现总是提示比赛未结束，查阅日志认为是 DOMjudge 的 event feed 格式与 ICPC tools 提供的 resolver 工具的格式不兼容。</p>
<p>尝试 DOMjura 发现同样不能正确读取 event-feed 。</p>
<h2 id="新生赛概况"><a href="#新生赛概况" class="headerlink" title="新生赛概况"></a>新生赛概况</h2><p>闲扯几句。</p>
<p>热身赛一切良好。出题人数据出锅，被批判了一个多小时2333。</p>
<p>正式赛赛前比赛账号导入的时候，有个人是后来添加的，和之前的版本没有对应上，导致部分队伍登录到了后一个队伍的账号，重新导入 team 后发现无法登录，还需导入 accounts。这导致比赛推迟了 5 分钟。</p>
<p>由于 Submission 的输出数据是保留的，而赛前我的服务器硬盘空间本来就不多了，比赛时当服务器的硬盘占用达到 90% 时，所有 judgehost 就都被关了。我只能胡乱删几个软件包腾出空间。还好没有造成大的影响。</p>
<p>然后直到最后还是没有搞出滚榜。</p>
<p>GG。总体来说还是挺顺利的，服务器没有崩，甚至平均 CPU load 只有 1.0 左右，就是感觉比较吃 I/O，还好我用的是固态（<del>先见之明</del>）。</p>
<p>总结一下，DOMjudge 体验极佳，可以在校赛再推广一波。</p>
<p>2019/3/19 补充：滚榜采用了 Github 上的<a href="https://github.com/hex539/scoreboard" target="_blank" rel="noopener">这个项目</a>。</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-03-19T00:00:00.000Z" itemprop="dateUpdated">2019-03-19 00:00:00</time>
</span><br>


        
        <a href="/2018/12/19/Domjudge-config/" target="_blank" rel="external">https://cjc7373.github.io/2018/12/19/Domjudge-config/</a>
        
    </div>
    
    <footer>
        <a href="https://cjc7373.github.io">
            <img src="/img/avatar.jpg" alt="Coherence">
            Coherence
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ACM/">ACM</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&title=《DOMjudge 配置/踩坑指南》 — Coherence&pic=https://cjc7373.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&title=《DOMjudge 配置/踩坑指南》 — Coherence&source=我校新生赛也能用上 World Final 同款评测系统啦~
DOMjudge 提供了详尽的官方文档，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://cjc7373.github.io/2018/12/19/Domjudge-config/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《DOMjudge 配置/踩坑指南》 — Coherence&url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&via=https://cjc7373.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/02/11/2018Summary_2019Plan/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">2018年终总结&amp;2019展望</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/12/01/Visio-KMS-Activate/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">使用KMS激活Visio</h4>
      </a>
    </div>
  
</nav>



    


<section class="comments" id="comments">
    <div id="disqus_thread"></div>
    <script>
    var disqus_shortname = 'cjc7373';
    lazyScripts.push('//' + disqus_shortname + '.disqus.com/embed.js')
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>



















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Coherence &copy; 2018 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&title=《DOMjudge 配置/踩坑指南》 — Coherence&pic=https://cjc7373.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&title=《DOMjudge 配置/踩坑指南》 — Coherence&source=我校新生赛也能用上 World Final 同款评测系统啦~
DOMjudge 提供了详尽的官方文档，然而对于博主这种英文弱鸡来说读的很痛苦。前前后后折腾..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://cjc7373.github.io/2018/12/19/Domjudge-config/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《DOMjudge 配置/踩坑指南》 — Coherence&url=https://cjc7373.github.io/2018/12/19/Domjudge-config/&via=https://cjc7373.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://cjc7373.github.io/2018/12/19/Domjudge-config/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMElEQVR42u3ay27rIBQF0Pz/T+dOK7Uhe4N9JcNiZKVp8GJwxHm8XvF6/1o/P//0/POTdq/XHQsDA+OxjPdwjRmffmflr+N9P/4OBgbGAYxx4Pv9nXHwHb9EHnCTd8PAwMAYv2ICawMoBgYGxh0BdxxGx0eQsDEwMDCuDYJjXgK4PRfHwMB4IKMt1v/P51v6GxgYGI9ivMvVpqbta72nFgYGxt6MfJsEk7cq1699GBgY5zBWUseE0Zbh2ibEBZMaGBgYD2EkBfq5EYp8sGylPIeBgXEOI2ki3vH9NtR+CbgYGBjbMaIcNw7HSYDOhyrycI+BgbE3I7+utcX9tpC3AsbAwDiTsVIsm2st5Hv98YyBgXEYI28G5OW2lcZndNAYGBhbM+4o9F81ZpEfDQYGxt6MufR1LijnV8y89IaBgXEy4yp2e7lsU9k/brgYGBjbMZJw1o5TzKW7c+U8DAyMExhtcT8fhmibAcl4x5dhCwwMjE0Z+Wtd1SRo2wZtMQ4DA2NXxsrPzW2/figfb7gYGBhbM5KwOGYUpbGyCRE1DDAwMA5g5AEuua7lQTkvrn35LwwMjE0Z73LlieXcoSzl3xgYGJsy2jZAe0HMA27eEpibBMPAwHg6Iw+ybbBOMG1aW580BgbGRowi611oBrTBtxgXw8DAwJhKMpOXW8FjYGBg5AExT03bElse7jEwME5g5Nu0sS5PR/M2JwYGxmmMpUmNqaZjeyiXNTUxMDCex/gHKzD6CJYE1ncAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
